<div class="row" style="margin-top: 20px ">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>Access Point Report</h5>

                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <table id="accesspoint" class="table table-striped table-bordered table-hover dataTables-accesspoint">
                    <thead>
                    <tr>
                        <th>AP mac</th>
                        <th>Total Downloads</th>
                        <th>Total Uploads</th>
                        <th>Total Sessions</th>
                        <th>Total Users</th>
                        <th>Avg Data Usage per User</th>
                        <th>Avg User session time</th>
                    </tr>
                    </thead>
                </table>

            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        var serverOriginUrl = window.location.origin;
        var payload = {
            from: from_,
            to: to_,
            groupnames: window.datagroups,
            tenantid: parseInt(Cookies.get("tenantid"))
        };

        function formatBytes(bytes) {
            return(bytes / 1073741824).toFixed(6) + " GB";
        }

        var accespointTable = $('.dataTables-accesspoint').DataTable({
            responsive: true,
            orderCellsTop: true,
            autoWidth: false,
            lengthMenu: [[10, 25, 50, -1], [10, 25, 50, "All"]],
            "ajax": {
                "url": serverOriginUrl +"/wifi/summary/accespoint",
                "type": "POST",
                "contentType": "application/json",
                "data": function(d){
                    return  JSON.stringify(payload);
                },
                "error": function (e) {
                },
                "dataSrc": function (d) {
                    return d
                }
            },
            columns: [
                {"data": "calledstationmac", "width": "10%"},
                {"data": "totaloutputoctets", "width": "8%"},
                {"data": "totalinputoctets", "width": "8%"},
                {"data": "totalsessions", "width": "5%"},
                {"data": "totalusers", "width": "5%"},
                {"data": "avgdataperuser", "width": "8%"},
                {"data": "avgdatapersessiontime", "width": "8%"}
            ],
            "columnDefs": [
                {
                    "render": function ( data ) {
                        return formatBytes(data);
                    },
                    "targets": 1
                },
                {
                    "render": function ( data ) {
                        return formatBytes(data);
                    },
                    "targets": 2
                }
            ],
            dom: "<'dt-toolbar'<'col-xs-12 col-sm-6'lf><'col-sm-6 col-xs-6 hidden-xs'CT>r>" +
            "t" +
            "<'dt-toolbar-footer'<'col-sm-6 col-xs-12 hidden-xs'i><'col-sm-6 col-xs-12'p>>",
            tableTools: {
                "aButtons": [
                    {
                        "sExtends": "copy",
                        "sButtonText": "Copy",
                        "mColumns": "visible"
                    },
                    {
                        "sExtends": "csv",
                        "sButtonText": "CSV",
                        "mColumns": "visible"
                    },
                    {
                        "sExtends": "xls",
                        "sButtonText": "Excel",
                        "mColumns": "visible"
                    },
                    {
                        "sExtends": "pdf",
                        "sButtonText": "PDF",
                        "mColumns": "visible"
                    },
                    {
                        "sExtends": "print",
                        "sButtonText": "Print",
                        "mColumns": "visible"
                    }
                ],
                "sSwfPath": "js/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
            }
        });
    });
</script>